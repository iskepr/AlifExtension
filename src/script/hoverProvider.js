const vscode = require("vscode");

function registerHoverProvider() {
  return vscode.languages.registerHoverProvider("alif", {
    provideHover(document, position) {
      const wordRange = document.getWordRangeAtPosition(position);
      const word = document.getText(wordRange);
      const hoverContent = getHoverContent(word);
      if (hoverContent) {
        return new vscode.Hover(
          new vscode.MarkdownString(
            `**فائدة امر ${word}**
            \n\n${hoverContent}
            \n\n[📖 المزيد من المعلومات](https://aliflang.org/Docs#${word})`
          )
        );
      }
    },
  });
}

function getHoverContent(word) {
  const documentation = {
    دالة: "دالة تحتوي على مجموعة من الأوامر تُنفذ بالتسلسل.\n\nمثال:\n\nدالة مرحبا()\n\n    اطبع('السلام عليكم')\n\n    اذا س < ص \n\n        اطبع('ص أكبر من س')",
    اطبع: "دالة لطباعة النصوص في الطرفية.\n\nمثال: اطبع('مرحبا')",
    ادخل: "دالة لقراءة مدخلات المستخدم.\n\nمثال:\n\nاسم = ادخل('أدخل اسمك: ')",
    اذا: "أداة لتنفيذ شرط معين، فإذا تحقق يتم تنفيذ الشفرة داخلها.\n\nمثال:\n\nاذا س < ص \n\n    اطبع('س أصغر من ص')",
    اواذا:
      "أداة تُستخدم بعد 'اذا' لإضافة شرط جديد يُنفذ في حال لم يتحقق الشرط الأول.\n\nمثال:\n\nاذا س < ص\n\n    اطبع('س أصغر من ص')\n\nاواذا س = ص\n\n    اطبع('س تساوي ص')",
    والا: "أداة تُستخدم مع 'اذا' و 'اواذا' لتنفيذ شفرة معين في حال لم تتحقق أي من الشروط السابقة.\n\nمثال:\n\nاذا س < ص\n\n    اطبع('س أصغر من ص')\n\nوالا\n\n    اطبع('س أكبر من أو يساوي ص')",
    لاجل: "حلقة تكرارية تُستخدم لتنفيذ الشفرة عدة مرات بناءً على نطاق محدد.\n\nمثال:\n\nلاجل ب في مدى(10)\n\n    اطبع(ب)\n\nفي هذا المثال، تتكرر الحلقة من 0 إلى 9 يعني 10 مرات، وتطبع قيمة ب في كل تكرار.",
    ارجع: "دالة تُستخدم داخل الدوال لإرجاع قيمة معينة عند استدعاء الدالة.",
    استمر:
      "تُستخدم داخل الحلقات لتخطي التكرار الحالي والانتقال إلى التكرار التالي.\n\nمثال:\n\nاذا س == 4:\n\n    س += 3\n\n    استمر",
    توقف: "تُستخدم داخل الحلقات لإنهاء تنفيذ الحلقة بالكامل عند تحقق شرط معين.\n\nمثال:\n\nاذا س == 4:\n\n    س += 3\n\n    توقف",
    بينما:
      "حلقة تكرارية تستمر في التنفيذ طالما تحقق الشرط المحدد.\n\nمثال:\n\nس = 0\n\n:بينما س < 5\n\n    اطبع(س)\n\n    س += 1",
    صنف: "يُستخدم لإنشاء كائنات وفق تصاميم محددة (البرمجة الكائنية).",
    استورد: "يُستخدم لاستيراد مكتبات خارجية.\n\nمثال:\n\nاستورد تاريخ_هجري",
    نوع: "دالة تُستخدم لمعرفة نوع المتغير.\n\nمثال:\n\nاطبع(نوع(5))",
    صحيح: "دالة لتحويل النص إلى عدد صحيح.\n\nمثال:\n\nرقم = صحيح('123')",
    عشري: "دالة لتحويل النص إلى عدد عشري (كسري).\n\nمثال:\n\nرقم = عشري('12.34')",
    نص: "دالة لتحويل أي قيمة إلى نص.\n\nمثال:\n\nاطبع(نص(123))",
    ".اضف":
      "يُستخدم لإضافة عنصر جديد إلى المصفوفة.\n\nمثال:\n\nمصفوفة = [4, 'سلام']\n\nمصفوفة.اضف(5)\n\nالنتيجة: [4, 'سلام', 5]",
    ".امسح":
      "يُستخدم لحذف عنصر معين من المصفوفة.\n\nمثال:\n\nمصفوفة = [4, 'سلام', 5]\n\nمصفوفة.امسح(5)\n\nالنتيجة: [4, 'سلام']",
    ".ادرج":
      "يُستخدم لإضافة عنصر في موقع معين داخل المصفوفة.\n\nمثال:\n\nمصفوفة = [4, 'سلام']\n\nمصفوفة.ادرج(1, 'صح')\n\nالنتيجة: [4, 'صح', 'سلام']",
    ".مفاتيح()":
      "تُستخدم لاسترجاع مفاتيح الكائن (الفهرس).\n\nمثال:\n\nس = {'أ': 5, 'ب': 7, 'ت': 9}\n\nاطبع(س.مفاتيح())",
    احذف: "يُستخدم لحذف متغير من الذاكرة.\n\nمثال:\n\nس = 5\n\nاحذف س",
    "+": "عملية حسابية تُستخدم للجمع بين قيمتين.\n\nمثال: 1 + 2 = 3",
    "-": "عملية حسابية تُستخدم للطرح بين قيمتين.\n\nمثال: 9 - 3 = 6",
    "*": "عملية حسابية تُستخدم للضرب بين قيمتين.\n\nمثال: 2 * 8 = 16",
    "\\": "عملية حسابية تُستخدم للقسمة بين قيمتين.\n\nمثال: 9 \\ 3 = 3",
    "\\\\": "عملية حسابية تُستخدم لإيجاد باقي القسمة.\n\nمثال: 8 \\\\ 5 = 3",
    "\\*":
      "عملية حسابية تُستخدم لإيجاد ناتج القسمة بدون باقي.\n\nمثال: 8 \\* 3 = 2",
    "^": "عملية حسابية تُستخدم لإيجاد القوة.\n\nمثال: 4 ^ 2 = 16",
    "\\^": "عملية حسابية تُستخدم لإيجاد الجذر.\n\nمثال: \\^ 4 = 2",
    "==": "عملية مقارنة تُستخدم للتحقق من التساوي بين قيمتين.\n\nمثال: 9 == 9",
    "!=": "عملية مقارنة تُستخدم للتحقق من عدم التساوي بين قيمتين.\n\nمثال: 9 != 9",
    ">": "عملية مقارنة تُستخدم للتحقق إذا كانت القيمة الأولى أكبر من الثانية.\n\nمثال: 3 > 6",
    "<": "عملية مقارنة تُستخدم للتحقق إذا كانت القيمة الأولى أصغر من الثانية.\n\nمثال: 6 < 9",
    ">=": "عملية مقارنة تُستخدم للتحقق إذا كانت القيمة الأولى أكبر من أو تساوي الثانية.\n\nمثال: 6 >= 6",
    "<=": "عملية مقارنة تُستخدم للتحقق إذا كانت القيمة الأولى أصغر من أو تساوي الثانية.\n\nمثال: 9 <= 3",
    و: "عملية منطقية تُستخدم لربط شرطين بحيث يكون الناتج صحيحًا إذا تحقق الشرطان.\n\nمثال: صح و صح",
    او: "عملية منطقية تُستخدم لربط شرطين بحيث يكون الناتج صحيحًا إذا تحقق أحد الشرطين.\n\nمثال: صح او خطأ",
    ليس: "عملية منطقية تُستخدم لعكس قيمة شرط معين.\n\nمثال: ليس خطأ",
    "=": "تُستخدم لإسناد قيمة إلى متغير.\n\nمثال: س = 9",
    "+=": "تُستخدم لإعادة الإسناد بإضافة قيمة معينة للمتغير.\n\nمثال: س += 5",
    "-=": "تُستخدم لإعادة الإسناد بطرح قيمة معينة من المتغير.\n\nمثال: س -= 3",
    "*=": "تُستخدم لإعادة الإسناد بضرب قيمة معينة في المتغير.\n\nمثال: س *= 2",
    "\\=":
      "تُستخدم لإعادة الإسناد بقسمة قيمة معينة على المتغير.\n\nمثال: س \\= 7",
    "^=": "تُستخدم لإعادة الإسناد برفع المتغير إلى قوة معينة.\n\nمثال: س ^= 3",
    "\\*=":
      "تُستخدم لإعادة الإسناد بإيجاد ناتج القسمة بدون باقي.\n\nمثال: س \\*= 7",
    "\\\\=": "تُستخدم لإعادة الإسناد بإيجاد باقي القسمة.\n\nمثال: س \\\\= 9",
    في: "تُستخدم للتحقق من وجود عنصر ضمن مجموعة.\n\nمثال: 7 في [3, 2, 9]",
    عام: "تُستخدم لجعل متغير عام داخل نطاق معين.\n\nمثال: عام عدد",
    اصل: "تُستخدم للإشارة إلى الصنف الأب في حالة الوراثة.\n\nمثال: اصل()._تهيئة_(المعاملات)",
    غفوة: "تُستخدم لتأخير تنفيذ الشفرة لفترة زمنية معينة.\n\nمثال: غفوة(2) // تأخير لمدة ثانيتين",
    "الوقت()": "تُستخدم للحصول على الوقت الحالي بالثواني.\n\nمثال: الوقت.الوقت()",
  };

  return documentation[word];
}

module.exports = registerHoverProvider;
